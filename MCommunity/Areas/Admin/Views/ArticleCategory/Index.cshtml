@{
    ViewBag.Title = "Index";
}

@section scripts{
    <link href="@Url.Content("~/Content/widgets/loadmask/jquery.loadmask.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Content/widgets/loadmask/jquery.loadmask.min.js")" type="text/javascript"></script>
}

                <ul class="breadcrumb" style="margin-bottom: 25px;">
                    <li><a href="/blog/changvh">首页</a> <span class="divider">/</span></li>
                    <li><a href="/admin/home">管理</a> <span class="divider">/</span></li>                  
                    <li class="active">文章分类	</li>
                </ul>
                <div class="back-right-inner">
                	<div class="input-prepend input-append" style="text-align:center;">
                        <input type="text"  id="c_name"  class="span3" name="name" placeholder="此处输入分类名称" maxlength="20">
                        <input type="text"  id="c_order"  class="span2" name="order" placeholder="此处输入排序" maxlength="20">
                        <button id="category_add" class="btn btn-primary">添加新分类</button>
                    </div>
                    <div class="divbord mg-t-30">
	                    <table id="tbCategory" class="table table-hover tbfix">
	                      <thead>
	                        <tr class="fc-008">
	                          <th width="50%">标题</th>
	                          <th width="19%">文章数量</th>
	                          <th width="19%">管　理</th>
	                          <th width="12%">排序</th>
	                        </tr>
	                      </thead>
	                      <tbody>
	                        
	                      </tbody>
	                    </table>
                    </div>
                    <div class="pagination pagination-centered">
                        <ul>
                            <li><a href="#" title="第一页">&laquo;</a></li>
                            <li><a href="#" title="上一页">&larr;</a></li>
                            <li class="active"><a href="#">10</a></li>
                            <li class="disabled"><a href="#">...</a></li>
                            <li><a href="#">20</a></li>
                            <li><a href="#" title="下一页">&rarr;</a></li>
                            <li><a href="#" title="最后页">&raquo;</a></li>
                        </ul>
                    </div>
                    @*<div class="pagination">
                        <ul>
                          <li><a href="#">&laquo;</a></li>
                          <li><a href="#">10</a></li>
                          <li class="active"><a href="#">11</a></li>
                          <li><a href="#">12</a></li>
                          <li><a href="#">&raquo;</a></li>
                        </ul>
                      </div>
                     
                      <div class="pagination pagination-centered">
                        <ul>
                          <li class="active"><a href="#">1</a></li>
                          <li><a href="#">2</a></li>
                          <li><a href="#">3</a></li>
                          <li><a href="#">4</a></li>
                          <li><a href="#">5</a></li>
                        </ul>
                      </div>*@
                </div><div id="tip" style="display:none;width:200px;height:75px;position:fixed;top:50%;margin:auto;background-color:blue;line-height:75px;text-align:center;vertical-align:middle;opacity:0.7;"></div><script id="articleCategoryTemplate" type="text/x-jquery-tmpl">
    <tr id="tr_248" name="248">
        <td>
	        ${CategoryName}
	    </td>
	    <td>
            0
	    </td>
	    <td>
	        <a><i class="icon-edit"></i> 编辑</a> | <a><i class="icon-remove"></i> 删除</a>
	    </td>
	    <td>
	        ${SortNumber}
	    </td>
	</tr>
</script>

<script type="text/javascript">


    $(function () {
        LoadArticleCategory();
        $('#category_add').click(function () {
            $.ajax({
                dataType: 'json',
                type: 'POST',
                url: '/articlecategory/new',
                data: { CategoryName: $('#c_name').val(), SortNumber: $('#c_order').val() },
                dataType:'json',
                success: function (data, textStatus, jqXHR) {
                    showTip('添加成功');
                    LoadArticleCategory();
                }
            });
        });
    });

    function showTip(msg) {
        //$('#tip').html('<span><i class="icon-ok"></i>  保存成功</span>').fadeIn('fast').delay(3000).animate({ top: '-50px' }, "slow", function () {
        //    $(this).css({display:'none', top:'%50'});
        //});
        //$.jBox.tip('已保存。', 'success');
        art.dialog({
            title: '信息提示',
            content: msg,
            
        }).time(3000).follow(document.getElementById('category_add'));

    }

    function LoadArticleCategory() {
        $.ajax({
            url: '/articlecategory/list',
            data:{ rd: new Date() },
            beforeSend: function () {
                $("#tbCategory").mask("Waiting...");
            },
            complete: function () {
                $("#tbCategory").unmask();
            },
            success: function (data) {
                $('#tbCategory tbody').empty();
                $('#articleCategoryTemplate').tmpl(data).appendTo('#tbCategory');
            }
        });
    }

</script>

